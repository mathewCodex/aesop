(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[316],{34893:function(e){e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},62034:function(e,t,n){var r=n(65067),i=n(95882);e.exports=function e(t,n,o,a,l){var c=-1,s=t.length;for(o||(o=i),l||(l=[]);++c<s;){var u=t[c];n>0&&o(u)?n>1?e(u,n-1,o,a,l):r(l,u):a||(l[l.length]=u)}return l}},67326:function(e,t,n){var r=n(45386),i=n(38333),o=n(34893),a=n(59950),l=n(78803),c=n(16909);e.exports=function(e,t,n){var s=-1,u=i,d=e.length,f=!0,p=[],g=p;if(n)f=!1,u=o;else if(d>=200){var v=t?null:l(e);if(v)return c(v);f=!1,u=a,g=new r}else g=t?[]:p;e:for(;++s<d;){var _=e[s],b=t?t(_):_;if(_=n||0!==_?_:0,f&&b===b){for(var m=g.length;m--;)if(g[m]===b)continue e;t&&g.push(b),p.push(_)}else u(g,b,n)||(g!==p&&g.push(b),p.push(_))}return p}},78803:function(e,t,n){var r=n(2143),i=n(34291),o=n(16909),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},95882:function(e,t,n){var r=n(50857),i=n(79631),o=n(86152),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},26139:function(e,t,n){var r=n(62034),i=n(36060),o=n(67326),a=n(93746),l=i((function(e){return o(r(e,1,a,!0))}));e.exports=l},10562:function(e,t,n){"use strict";n.d(t,{WD:function(){return De},e4:function(){return et},$C:function(){return g}});var r,i,o=n(7328),a=n(49326),l=n(60138),c=(0,l.Ps)(r||(r=(0,o.Z)(["\n  ","\n  query getCategory($id: String) {\n    category(id: $id) {\n      id\n      title\n      url\n      metadata {\n        id\n        title\n        description\n        openGraphImage\n        notCrawlable\n        __typename\n      }\n      theme: mobileTheme\n      navigationBarTheme\n      desktopLogoColour\n      headerSlice {\n        ...ContentSection\n        id\n        __typename\n      }\n      contentSection {\n        ...ContentSection\n        id\n        __typename\n      }\n      subCategories {\n        id\n        url\n        slug: id\n        name\n        headerSlice {\n          ...ContentSection\n          id\n          __typename\n        }\n        filters {\n          id\n          name\n          allFacets: name\n          facets {\n            id\n            name\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n  }\n"])),a.rk),s=(0,l.Ps)(i||(i=(0,o.Z)(["\n  ","\n  query getSubCategory($id: String) {\n    category(id: $id) {\n      contentSection {\n        ...ContentSection\n        __typename\n      }\n    }\n    subCategory(id: $id) {\n      name\n      introduction\n      description\n      metadata {\n        title\n        description\n        openGraphImage\n        notCrawlable\n      }\n      products {\n        sku\n        name\n        url\n        isSellable\n        rawPrice {\n          value\n        }\n        price\n        size\n        image {\n          ...Image\n        }\n        detailRows {\n          id\n          title\n          copy {\n            parsed\n          }\n        }\n        variants {\n          sku\n          price\n          size\n          isInStock: inStock\n          image {\n            ...Image\n          }\n          tracking {\n            name\n            id\n            price\n            brand\n            category\n            variant\n            dimension3\n            dimension4\n            dimension5\n          }\n        }\n        tracking {\n          name\n          id\n          price\n          brand\n          category\n          variant\n          dimension3\n          dimension4\n          dimension5\n        }\n      }\n    }\n  }\n"])),a.rk),u=n(35793),d=n(52707),f=n(56580),p=n(52322),g=function(){var e=(0,f.v9)((function(e){return e.user.isLoggedIn}));return{onAddToCart:function(e,t){u.hau.dispatch((0,u.dAK)(e,t))},renderAddToCabinetButton:function(t,n){return(0,p.jsx)(d.oY,{iconOnly:!0,isLoggedIn:e,product:t,trackingPageLocation:n})}}},v=n(5632),_=n(2784),b="facets",m=("".concat("AESOP","addCurrentProductToCart"),n(8529)),y=n(95235),O=n(34126);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e,t){var n=window.location.search,r=(0,O.parse)(n);!t&&r[e]&&delete r[e];var i=t?(0,O.stringify)(j(j({},r),{},(0,y.Z)({},e,t))):(0,O.stringify)(j({},r));i&&function(e){var t=window.location,n=t.protocol,r=t.host,i=t.pathname,o="".concat(n,"//").concat(r).concat(i).concat(e);window.history.pushState({path:o},"",o)}("?".concat(i))},C=(0,_.createContext)(void 0),P=(0,_.createContext)(void 0),w=(0,_.createContext)(void 0),I=function(){var e=(0,_.useContext)(C);if(!e)throw new Error("FilterButton context not found");return e},N=function(){var e=(0,_.useContext)(P);if(!e)throw new Error("FilterOpenModal context not found");return e},L=C.Provider,T=P.Provider,F=w.Provider,E=function(e){var t,n,r=e.children,i=null===(t=(0,v.useRouter)().query.facets)||void 0===t?void 0:t.toString(),o=(n=i)?n.split("".concat("|")).filter((function(e){return!!e})).map((function(e){var t=e.replace(/^,/,"").split(":"),n=(0,m.Z)(t,2),r=n[0],i=n[1].replace(/^\s+/,"").split(",");return(0,y.Z)({},r,i)})).reduce((function(e,t){return j(j({},e),t)}),{}):null,a=(0,_.useState)(!0),l=a[0],c=a[1],s=(0,_.useState)(new Map),u=s[0],d=s[1],f=(0,_.useState)(void 0),g=f[0],b=f[1],O=(0,_.useState)(o||{}),h=O[0],x=O[1];return(0,p.jsx)(F,{value:{loading:l,setLoading:c,loadingQueue:u,setLoadingQueue:d},children:(0,p.jsx)(L,{value:{isFilterOpen:g,setIsFilterOpen:b},children:(0,p.jsx)(T,{value:{activeFilters:h,setActiveFilters:x},children:r})})})},S=n(31949),k=n(40794);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=function(){var e=(0,v.useRouter)().query,t=e.category,n=e.subcategory,r=(0,k.a)(c,{errorPolicy:"all",fetchPolicy:"cache-first",variables:{id:t}}).data;if(!r)return null;var i=((null===r||void 0===r?void 0:r.category)||{}).headerSlice;if(n){var o,a,l=null===r||void 0===r||null===(o=r.category)||void 0===o||null===(a=o.subCategories)||void 0===a?void 0:a.find((function(e){return e.id===n}));if(null!==l&&void 0!==l&&l.headerSlice)i=null===l||void 0===l?void 0:l.headerSlice;else{var s="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==);";i=D(D({},i),{},{heading:null===l||void 0===l?void 0:l.name,description:null,theme:"Dark",backgroundColour:null,image:{__typename:"ImageType",id:"categories-test-6-travel-image",altText:"Test Travel Header",caption:null,creative:"Other.",large:s,medium:s,small:s}})}}return(0,p.jsx)(S.ContentSection,{content:[i]})},R=n(52746),M=n(29035),V=n(32580),Z=n(32658),U=n(72779),H=n.n(U),q=function(e){var t=e.id,n=e.loading,r=function(){var e=(0,_.useContext)(w);if(!e)throw new Error("DataLoading context not found");return e}(),i=r.loadingQueue,o=r.setLoadingQueue,a=r.setLoading;(0,_.useEffect)((function(){var e=new Map(i);e.set(t,n),o(e)}),[n,t]),(0,_.useEffect)((function(){var e=Array.from(i).every((function(e){var t=(0,m.Z)(e,2);t[0];return t[1]}));a(e)}),[i])},z=n(42782),G=n(57691),Y=n(93710),Q=n.n(Y),W=function(){var e=I(),t=e.isFilterOpen,n=e.setIsFilterOpen;return(0,p.jsx)("div",{className:Q().filterCloseButtonContainer,children:(0,p.jsx)(Z.Button,{aria:{expanded:t,label:"close"},className:Q().filterCloseButton,dataTestId:"CATEGORY_CLOSE_FILTER",isInline:!0,onClick:function(){n(!1)},children:(0,p.jsx)(Z.Icon,{className:Q().closeIcon,height:12,name:"close",width:12})})})},J=function(e){var t=e.filters,n=N().activeFilters,r=(0,S.useLocalisedCopy)().getCopy;return(0,p.jsx)("span",{className:Q().buttonLabel,"data-testid":"CATEGORY_FILTER_BUTTON_LABEL",children:function(){if(!n)return r("filter");var e=Object.values(n).flat().filter((function(e){return e})),i=e.length,o=e[0];if(0===i)return r("filter");if(1===i){var a=Object.keys(n)[0],l=t.find((function(e){return e.id===a})).facets.find((function(e){return e.id===o})).name;return"".concat(r("filter")," ").concat(l)}return"".concat(i," ").concat(r("filtersSelected"))}()})},K=function(e){var t=e.filters,n=I(),r=n.isFilterOpen,i=n.setIsFilterOpen;return(0,p.jsxs)(Z.Button,{aria:{expanded:r},className:Q().filterOpenButton,dataTestId:"CATEGORY_OPEN_FILTER",onClick:function(){i(!0)},children:[(0,p.jsx)(J,{filters:t}),(0,p.jsx)(Z.Icon,{className:Q().openIcon,height:10,name:"downArrow",width:15})]})},X=function(e){var t=e.filters;(0,V.useWindowHasResized)();var n=(0,z.su)("md only"),r=(0,z.su)("lg"),i=I().isFilterOpen,o=r?38:33,a=r?100:80;return(0,p.jsxs)("div",{className:Q().filterButtonContainer,children:[(r||n)&&(0,p.jsx)(G.Bo,{className:Q().aesopLogo,height:o,label:"Aesop",linkTitle:"Go To Aesop Home",width:a}),i&&(0,p.jsx)(W,{}),!i&&(0,p.jsx)(K,{filters:t})]})},$=n(6040),ee=n.n($),te=n(26139),ne=n.n(te),re=function(){var e,t=(0,v.useRouter)().locale,n=(0,_.useState)([]),r=n[0],i=n[1],o=N().activeFilters,a=(0,v.useRouter)().query.subcategory,l=(0,k.a)(s,{errorPolicy:"all",fetchPolicy:"cache-only",variables:{id:a}}).data;(0,_.useEffect)((function(){fetch("".concat("https://www.aesop.com/","static/index/filters_").concat(t,".json")).then((function(e){return e.json()})).then((function(e){return i(e)})).catch((function(){return{}}))}),[t]);var c=(null===l||void 0===l||null===(e=l.subCategory)||void 0===e?void 0:e.products.map((function(e){return e.sku})))||[],u=r.filter((function(e){return c.includes(e.sku)}));return{getInitialFilters:function(){var e=u.map((function(e){return e.facets}));return ne().apply(void 0,(0,R.Z)(e))},isFilterEnabled:function(e){var t=JSON.parse(JSON.stringify(o))||{},n=e.split(":"),r=(0,m.Z)(n,2),i=r[0],a=r[1];return t[i]||(t[i]=[]),t[i].push(a),Object.keys(t).reduce((function(e,n){var r=t[n];return e.filter((function(e){return r.every((function(t){return e.facets.includes("".concat(n,":").concat(t))}))}))}),u)},getFilteredProducts:function(e){if(!o||0===Object.keys(o).length)return e;var t=Object.keys(o).reduce((function(e,t){var n=o[t];return e.filter((function(e){return n.every((function(n){return e.facets.includes("".concat(t,":").concat(n))}))}))}),u).map((function(e){return e.sku}));return e.filter((function(e){var n=e.sku;return t.includes(n)}))}}};function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var oe=function(e){var t=e.copy,n=e.filterId,r=N().setActiveFilters,i=function(e){r((function(t){return e&&delete t[e],function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)}))};return(0,p.jsx)(Z.Button,{dataTestId:"CATEGORY_FILTER_CLEAR_BUTTON",isInline:!0,onClick:function(){return i(n)},children:t})},ae=n(47083),le=n.n(ae),ce=function(e){var t=e.copy,n=e.filterId,r=e.name;return(0,p.jsxs)("div",{className:le().filterHeadingContainer,children:[(0,p.jsx)("h5",{className:le().filterItemLabel,children:r}),(0,p.jsx)(oe,{copy:t,filterId:n})]})},se=n(1455),ue=n.n(se);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=function(e){var t=e.facetId,n=e.facetName,r=e.filterId,i=e.isSelected,o=e.isEnabled,a=N(),l=a.activeFilters,c=a.setActiveFilters,s=(0,_.useCallback)((function(e){var n=(0,y.Z)({},r,[t]),i=l&&!Object.keys(l).includes(Object.keys(n)[0]);c(l?i?function(e){return fe(fe({},e),n)}:fe({},function(e,t){for(var n in e)if(n===Object.keys(t)[0]){var r=Object.values(t).flat()[0],i=e[n].indexOf(r);i>-1?e[n].splice(i,1):e[n].push(r),0===e[n].length&&delete e[n]}return e}(l,n)):fe({},n))}),[l,r,c]);return(0,p.jsx)(Z.Checkbox,{className:ue().filterListCheckbox,dataTestId:"CATEGORY_FILTER_".concat(null===t||void 0===t?void 0:t.toUpperCase(),"_LIST_ITEMLIST"),dataTestRef:"CATEGORY_FILTER_".concat(null===r||void 0===r?void 0:r.toUpperCase(),"_LIST_ITEM"),isChecked:i,isEnabled:o,label:n,name:n,onChange:function(){return s(n)},theme:"dark"})},ge=function(e){var t,n=e.facets,r=e.filterId,i=e.copy,o=e.filterName,a=e.isDropdownView,l=N().activeFilters,c=l&&(null===(t=Object.values(l))||void 0===t?void 0:t.flat())||[],s=re(),u=s.getInitialFilters,d=s.isFilterEnabled,f=u(),g=f.some((function(e){return e.includes(r)}));return n&&g?(0,p.jsxs)("div",{className:H()((0,y.Z)({},ue().filterColumn,!a)),children:[!a&&(0,p.jsx)(ce,{copy:i,filterId:r,name:o}),(0,p.jsx)("ul",{className:ue().filterItemsList,"data-filter-id":r,"data-testid":"CATEGORY_FILTER_FACET_LIST",children:n.filter((function(e){var t=e.id;e.name;return f.includes("".concat(r,":").concat(t))})).map((function(e){var t=e.id,n=e.name,i=d("".concat(r,":").concat(t));return(0,p.jsx)("li",{className:H()(ue().filterListItem,(0,y.Z)({},ue().filterListCheckboxDisabled,0===i.length)),"data-facet-id":t,children:(0,p.jsx)(pe,{facetId:t,facetName:"".concat(n," (").concat(i.length,")"),filterId:r,isEnabled:!!i.length,isSelected:c.includes(t)})},"".concat(r,":").concat(t,":").concat(c.includes(t)))}))})]},r):null},ve=n(77271),_e=n.n(ve),be=function(e){var t,n=e.copy,r=e.filters,i=e.isSticky,o=I(),a=o.isFilterOpen,l=o.setIsFilterOpen,c=H()(_e().filterOpenModal,(t={},(0,y.Z)(t,_e().enterActive,a),(0,y.Z)(t,_e().exitActive,!a&&void 0!==a),t)),s=ee()((function(){a&&i&&l(!1)}),16);return(0,_.useEffect)((function(){return window.addEventListener("scroll",s),function(){window.removeEventListener("scroll",s)}})),r?(0,p.jsx)("div",{className:c,"data-testid":"CATEGORY_FILTER_OPEN_MODAL",children:(0,p.jsx)("div",{className:_e().filterOpenModalContentContainer,children:r.map((function(e){var t=e.name,r=e.facets,i=e.id;return(0,p.jsx)(ge,{copy:n,facets:r,filterId:i,filterName:t},i)}))})}):null},me=n(36671),ye=n(98452),Oe=n(69872),he=n.n(Oe),je=function(e){var t=e.children,n=e.filterId,r=e.allFacetsCopy,i=N().activeFilters,o=(0,_.useState)(!1),a=o[0],l=o[1],c=function(e){var t=e.activeFilters,n=e.filterId,r=e.allFacetsCopy,i=null===t||void 0===t?void 0:t[n];return i&&0!==i.length?i.length>1?i.join(", "):i[0]:r}({activeFilters:i,filterId:n,allFacetsCopy:r});return(0,p.jsx)(me.UQ,{allowZeroExpanded:!0,className:he().filterToggleItem,"data-testid":"Mobile-Filter-Toggle",onChange:function(e){l(e.length>0)},children:(0,p.jsxs)(me.Qd,{uuid:n,children:[(0,p.jsx)(me.Ol,{children:(0,p.jsxs)(me.on,{className:he().button,"data-testid":"Mobile-Filter-Toggle-Heading-Button",children:[(0,p.jsx)(ye.Collapse,{isOpened:!a,theme:{collapse:he().collapse},children:(0,p.jsx)("h3",{className:he().filterToggleItemHeading,children:c})}),(0,p.jsx)(Z.Icon,{className:he().icon,height:10,name:"downArrow",theme:"dark",width:10})]})}),(0,p.jsx)(me.Mt,{className:he().panel,"data-testid":"Mobile-Filter-Toggle-Panel",children:(0,p.jsx)(ye.Collapse,{isOpened:a,theme:{collapse:he().collapse},children:t})})]})})},xe=n(7791),Ce=n.n(xe),Pe=function(e){var t,n=e.copyClearSelection,r=e.copySeeProducts,i=e.filters,o=I(),a=o.isFilterOpen,l=o.setIsFilterOpen,c=N().setActiveFilters,u=(0,v.useRouter)().query,d=u.category,f=u.subcategory,g=(0,k.a)(s,{errorPolicy:"all",variables:{id:f||d}}).data,_=re(),b=null===_||void 0===_?void 0:_.getFilteredProducts((null===g||void 0===g||null===(t=g.subCategory)||void 0===t?void 0:t.products)||[]),m=function(){l(void 0)};return i?(0,p.jsx)(Z.Modal,{copy:{close:"close"},isFullScreen:!0,isVisible:!!a,onClose:m,children:(0,p.jsxs)("div",{className:Ce().filterContainer,"data-testid":"CATEGORY_FILTER_MOBILE_MODAL",children:[(0,p.jsx)("div",{className:Ce().filterWrapper,children:i.map((function(e){var t=e.name,n=e.facets,r=e.id,i=e.allFacets;return(0,p.jsxs)("div",{className:Ce().filterItem,children:[(0,p.jsx)("h5",{className:Ce().filterItemLabel,children:t}),(0,p.jsx)(je,{allFacetsCopy:i,filterId:r,children:(0,p.jsx)(ge,{facets:n,filterId:r,filterName:t,isDropdownView:!0})})]},r)}))}),(0,p.jsxs)("div",{className:Ce().filterFooter,children:[(0,p.jsx)(Z.Button,{className:Ce().filterFooterBtn,dataTestId:"CATEGORY_FILTER_MOBILE_CLEAR_BUTTON",onClick:function(){c({})},children:n}),(0,p.jsxs)(Z.Button,{className:Ce().filterFooterBtnDark,onClick:m,children:[r," (",null===b||void 0===b?void 0:b.length,")"]})]})]})}):null},we=function(e){var t=e.filters,n=e.isSticky;(0,V.useWindowHasResized)();var r=(0,S.useLocalisedCopy)().getCopy,i=(0,z.su)("xs to sm only");return t?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(X,{filters:t}),!i&&(0,p.jsx)(be,{copy:r("clear"),filters:t,isSticky:n}),i&&(0,p.jsx)(Pe,{copyClearSelection:r("clear"),copySeeProducts:r("seeProducts"),filters:t})]}):null},Ie=n(46397),Ne=n.n(Ie),Le=n(97934),Te=n.n(Le),Fe=function(e){var t=e.subCategoryOptions,n=(0,v.useRouter)(),r=n.asPath,i=n.query,o=n.locale,a=void 0===o?"":o,l=n.push,c=N().setActiveFilters,s=r.split("?")[0];if(!t)return null;return(0,p.jsx)("div",{className:Te().subNavListsContainer,"data-testid":"CATEGORY_SUB_NAV",children:(0,p.jsx)("ul",{className:Te().subNavLists,children:t.map((function(e){var t=e.id,n=e.name,r=e.slug,o=e.url,u="/".concat(M.fQ[a]).concat(o);return(0,p.jsx)("li",{className:Te().subNavList,children:(0,p.jsx)(Z.Hyperlink,{className:H()(Te().subNavLink,(0,y.Z)({},Te().selected,i.subcategory===t||!i.subcategory&&i.category===t)),dataTestId:"CATEGORY_SUB_NAV_".concat(null===t||void 0===t?void 0:t.toUpperCase()),dataTestRef:"CATEGORY_SUB_NAV_ITEM_LINK",onClick:function(e){return function(e,t,n){e.preventDefault(),s!==n&&(c([]),l(t,void 0,{locale:M.fQ[a]}))}(e,o,u)},url:u,children:n})},r)}))})})},Ee=function(){(0,V.useWindowHasResized)();var e=(0,v.useRouter)(),t=e.asPath,n=e.locale,r=void 0===n?"":n,i=e.query.category,o=t.split("?")[0],a=(0,k.a)(c,{errorPolicy:"all",fetchPolicy:"cache-first",variables:{id:i}}),l=a.data,s=a.loading,u=(0,_.useRef)(null),d=function(e){var t=(0,_.useState)(!1),n=t[0],r=t[1],i=(0,z.su)("xs to sm only")?-64:0;return(0,_.useEffect)((function(){var t=null===e||void 0===e?void 0:e.current,n=new IntersectionObserver((function(e){var t=(0,m.Z)(e,1)[0].boundingClientRect;r(t.top<i)}),{rootMargin:"0px",threshold:[0,1]});return t&&n.observe(t),function(){t&&n.unobserve(t)}}),[e,i]),n}(u),f=(null===l||void 0===l?void 0:l.category)||{},g=f.id,O=f.title,h=f.subCategories,j=[{id:g,name:"All ".concat(O),url:"/c/".concat(g,"/"),slug:null}].concat((0,R.Z)(h||[])),C=h&&h.find((function(e){return e.url===o.split(M.fQ[r])[1]})),P=H()(Ne().subNavigation,(0,y.Z)({},Ne().isFixedFilter,d&&C));return function(){var e=[],t=N().activeFilters;if(t)for(var n=0,r=Object.entries(t);n<r.length;n++){var i=(0,m.Z)(r[n],2),o=i[0],a=i[1];e.push("".concat(o,": ").concat(a).concat("|"))}var l=e.toString();(0,_.useEffect)((function(){x(b,l)}),[l])}(),q({loading:s,id:"sub-category"}),(0,p.jsxs)("div",{className:P,"data-testid":"category-navigation",ref:u,children:[s&&!l&&(0,p.jsx)(Z.Loading,{centerVertical:!0,isLoading:!0,screenReaderText:M.xK[r],size:"large"}),!s&&(null===h||void 0===h?void 0:h.length)>0&&(0,p.jsxs)("div",{className:Ne().subNavContainer,children:[(0,p.jsx)(Fe,{subCategoryOptions:j}),(0,p.jsx)(we,{filters:null===C||void 0===C?void 0:C.filters,isSticky:d})]})]})};function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ae=function(){var e=(0,v.useRouter)().query.category,t=(0,f.I0)(),n=(0,k.a)(c,{errorPolicy:"all",fetchPolicy:"cache-first",variables:{id:e}}).data,r=(null===n||void 0===n?void 0:n.category)||{},i=r.contentSection,o=void 0===i?[]:i,a=r.metadata,l=g();return(0,_.useEffect)((function(){n&&t((0,u.f_h)(n.category))}),[n]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(B,{}),(0,p.jsx)(Ee,{}),(0,p.jsx)(S.Metadata,ke({url:"/c/".concat(e,"/")},a),e),(0,p.jsx)("div",{"data-testid":"category-carousel-view",children:(0,p.jsx)(S.ContentSection,{content:o,sliceProps:l})})]})},De=function(){return(0,p.jsx)(E,{children:(0,p.jsx)(Ae,{})})},Be=n(40338),Re=n.n(Be),Me=function(e){var t=e.headline,n=e.extendedDescription;return(0,p.jsx)(Z.Transition,{isActive:!0,shouldMountOnEnter:!0,shouldUnmountOnExit:!0,children:(0,p.jsxs)("div",{className:Re().categoryIntroWrapper,"data-testid":"CATEGORY_INTRO",children:[(0,p.jsx)("h2",{className:Re().categoryIntroHeading,children:t}),(0,p.jsx)("p",{className:Re().categoryIntroParagraph,children:n})]})})},Ve=n(82269),Ze=["isBundle","product","isLoggedIn","productIndex","copy"];function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var He=(0,_.forwardRef)((function(e,t){var n=e.isBundle,r=e.product,i=e.isLoggedIn,o=e.productIndex,a=e.copy,l=(0,Ve.Z)(e,Ze),c=a.addToCart,s=a.learnMore,u=a.updateNotification,f=a.outOfStock,g=(0,p.jsxs)("div",{className:"CategoryProductView__CategoryProductItem__AddToCabinetButtonSection",children:[(0,p.jsx)("div",{className:"carouselBadge",children:r.badge}),(0,p.jsx)("div",{className:"icon",children:(0,p.jsx)(d.oY,{iconOnly:!0,isLoggedIn:i,product:r,trackingPageLocation:"gift-guide",trackingSelectedVariant:r.variants[o]})})]});return(0,p.jsx)(Z.ProductGridItem,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({copy:{addToCart:{cartAction:c,updateNotification:u,outOfStock:{label:f,title:f}}},cta:n?{text:s,url:r.url}:void 0,info:"".concat(r.price).concat(r.size?" / ".concat(r.size):""),ref:t,theme:"dark",topRow:!n&&g,url:r.url},l))}));function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ge=function(e){var t,n,r,i,o,a,l=e.copy,c=e.product,s=e.productIndex,d=e.TrackedProduct,f=(0,_.useRef)(null),g=0===(null===(t=c.variants)||void 0===t?void 0:t.length),v=(0,u.tIb)(c,u.Hmz.SUBCAT),b=u.hau.getState().user.isLoggedIn;return(0,p.jsx)(Z.AddToCartContextProvider,{onClick:v,children:(0,p.jsx)(Z.ProductDetailContextProvider,{product:ze(ze({},c),{},{image:{altText:null===c||void 0===c||null===(n=c.image)||void 0===n?void 0:n.altText,sizes:null===c||void 0===c||null===(r=c.image)||void 0===r?void 0:r.sizes},productName:c.name,definitionList:null===c||void 0===c||null===(i=c.detailRows)||void 0===i||null===(o=i.slice(0,2))||void 0===o?void 0:o.map((function(e){var t;return{id:e.id,term:e.title,description:(0,p.jsx)(G.zy,{document:null===(t=e.copy)||void 0===t?void 0:t.parsed})}}))}),children:(0,p.jsx)(Z.VariantSelectContextProvider,{variants:null===(a=c.variants)||void 0===a?void 0:a.filter((function(e){return!!e.size||!!e.price})).map((function(e){var t,n;return ze(ze({},e),{},{image:{altText:null===e||void 0===e||null===(t=e.image)||void 0===t?void 0:t.altText,sizes:null===e||void 0===e||null===(n=e.image)||void 0===n?void 0:n.sizes}})})),children:(0,p.jsx)(Z.Podium,{className:"ProductCommerce__podium",horizontalPadding:"none",verticalPadding:"none",children:(0,p.jsx)(d,{isBundle:g,learnMore:null===l||void 0===l?void 0:l.learnMore,product:c,productIndex:s,children:(0,p.jsx)(He,{copy:l,isBundle:g,isLoggedIn:b,product:c,productIndex:s,ref:f})})})})})})},Ye=n(57269),Qe=n.n(Ye);function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ke=function(e){var t,n,r=e.TrackedProduct,i=void 0===r?function(e){var t=e.children;return(0,p.jsx)(p.Fragment,{children:t})}:r,o=(0,S.useLocalisedCopy)().getCopy,a=(0,v.useRouter)(),l=a.locale,c=void 0===l?"":l,u=a.query.subcategory,d=(0,k.a)(s,{errorPolicy:"all",variables:{id:u}}),f=d.data,_=d.loading,b=re().getFilteredProducts,m=g(),y=((null===f||void 0===f?void 0:f.category)||{}).contentSection,O=void 0===y?[]:y,h=(null===f||void 0===f?void 0:f.subCategory)||{},j=h.products,x=void 0===j?[]:j,C=h.metadata,P=b(x);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(B,{}),(0,p.jsx)(Ee,{}),(0,p.jsx)(S.Metadata,Je({},C),u),(0,p.jsxs)("div",{className:Qe().CategoryProductViewContainer,"data-testid":"category-product-view",children:[_&&(0,p.jsx)(Z.Loading,{centerVertical:!0,isLoading:!0,screenReaderText:M.xK[c],size:"large"}),!_&&P&&(0,p.jsxs)(Z.Podium,{className:Qe().CategoryProductView,verticalPadding:"none",children:[(0,p.jsx)(Me,{extendedDescription:null===f||void 0===f||null===(t=f.subCategory)||void 0===t?void 0:t.description,headline:null===f||void 0===f||null===(n=f.subCategory)||void 0===n?void 0:n.introduction}),P.map((function(e,t){return(0,p.jsx)("div",{"data-testid":"subcategory-product",children:(0,p.jsx)(Z.Transition,{isActive:!0,shouldMountOnEnter:!0,shouldUnmountOnExit:!0,children:(0,p.jsx)(S.ContentSectionErrorBoundary,{id:e.sku,type:"CategoryProduct",children:(0,p.jsx)(Ge,{copy:{addToCart:o("addToCart"),learnMore:o("learnMore"),updateNotification:o("updateNotification"),size:o("size"),outOfStock:o("outOfStock")},product:e,productIndex:t,TrackedProduct:i})})})},e.sku)}))]},"category-product-view"),!_&&(0,p.jsx)(S.ContentSection,{content:O,sliceProps:m})]})]})};function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var et=function(e){return(0,p.jsx)(E,{children:(0,p.jsx)(Ke,$e({},e))})}},40338:function(e){e.exports={categoryIntroWrapper:"categoryIntro_categoryIntroWrapper__4DcLK",categoryIntroHeading:"categoryIntro_categoryIntroHeading__BMn3D",categoryIntroParagraph:"categoryIntro_categoryIntroParagraph__nM2U6","filter-enter-ml":"categoryIntro_filter-enter-ml__Nmxrs","filter-exit-ml":"categoryIntro_filter-exit-ml__XljuS","fade-in":"categoryIntro_fade-in__U2Gpa"}},93710:function(e){e.exports={filterButtonContainer:"filterButton_filterButtonContainer__J49vO",aesopLogo:"filterButton_aesopLogo__7sghK",filterOpenButton:"filterButton_filterOpenButton__fgQxr",openIcon:"filterButton_openIcon__qoX_b",filterCloseButtonContainer:"filterButton_filterCloseButtonContainer__4Dr6d",filterCloseButton:"filterButton_filterCloseButton__dAy4S",buttonLabel:"filterButton_buttonLabel__TQ8EB","filter-enter-ml":"filterButton_filter-enter-ml__rwFt4","filter-exit-ml":"filterButton_filter-exit-ml__iTSjZ","fade-in":"filterButton_fade-in__NFXoq"}},1455:function(e){e.exports={filterItemsList:"filterFacetItems_filterItemsList__jbxDb",filterColumn:"filterFacetItems_filterColumn__Ucrm3",filterListItem:"filterFacetItems_filterListItem__BpRI7",filterListCheckboxDisabled:"filterFacetItems_filterListCheckboxDisabled__jwx2P",filterListCheckbox:"filterFacetItems_filterListCheckbox__SF2XG","filter-enter-ml":"filterFacetItems_filter-enter-ml__xO2e1","filter-exit-ml":"filterFacetItems_filter-exit-ml__O3sR7","fade-in":"filterFacetItems_fade-in__gJAAv"}},47083:function(e){e.exports={filterHeadingContainer:"filterFacetHeading_filterHeadingContainer__AUqgu",filterItemLabel:"filterFacetHeading_filterItemLabel__G80kh","filter-enter-ml":"filterFacetHeading_filter-enter-ml__NhR_q","filter-exit-ml":"filterFacetHeading_filter-exit-ml__xLqhA","fade-in":"filterFacetHeading_fade-in__rqmGL"}},77271:function(e){e.exports={filterOpenModal:"filterViewDesktop_filterOpenModal__ZI0lI",enterActive:"filterViewDesktop_enterActive__q7DvA","filter-enter-ml":"filterViewDesktop_filter-enter-ml__iz4ox",exitActive:"filterViewDesktop_exitActive__EptL3","filter-exit-ml":"filterViewDesktop_filter-exit-ml__KPW_v",filterOpenModalContentContainer:"filterViewDesktop_filterOpenModalContentContainer__pI_E6","fade-in":"filterViewDesktop_fade-in__kXpry",filterColumn:"filterViewDesktop_filterColumn__UoZJ3"}},69872:function(e){e.exports={filterToggleItem:"filterToggle_filterToggleItem__qjMRQ",filterToggleItemHeader:"filterToggle_filterToggleItemHeader__WnLtb",filterToggleItemHeading:"filterToggle_filterToggleItemHeading__yufIX",button:"filterToggle_button__Vutqv",icon:"filterToggle_icon__Anv_m",collapse:"filterToggle_collapse__J5lFT",panel:"filterToggle_panel__ngbxK","filter-enter-ml":"filterToggle_filter-enter-ml__KVXOr","filter-exit-ml":"filterToggle_filter-exit-ml__D9Ue5","fade-in":"filterToggle_fade-in__lspPq"}},7791:function(e){e.exports={filterContainer:"filterViewMobile_filterContainer__wR9WN",filterWrapper:"filterViewMobile_filterWrapper___UI2D",filterFooter:"filterViewMobile_filterFooter___PTmq",filterFooterBtnDark:"filterViewMobile_filterFooterBtnDark__tJUaV",filterItem:"filterViewMobile_filterItem__2IJwD",filterItemLabel:"filterViewMobile_filterItemLabel__tm_QE","filter-enter-ml":"filterViewMobile_filter-enter-ml__3wnq0","filter-exit-ml":"filterViewMobile_filter-exit-ml__zFQK1","fade-in":"filterViewMobile_fade-in__hrqtO"}},46397:function(e){e.exports={subNavigation:"subNavigation_subNavigation__b0ZiE",isFixedFilter:"subNavigation_isFixedFilter__SeXxj",subNavContainer:"subNavigation_subNavContainer__8LZ2X","fade-in":"subNavigation_fade-in___M9Ae","filter-enter-ml":"subNavigation_filter-enter-ml__JTcVO","filter-exit-ml":"subNavigation_filter-exit-ml__WseEO"}},97934:function(e){e.exports={subNavListsContainer:"subNavigationList_subNavListsContainer__IyfDM","fade-in":"subNavigationList_fade-in__5TxUD",subNavLists:"subNavigationList_subNavLists__EZ9cc",subNavList:"subNavigationList_subNavList__YlZCz",subNavLink:"subNavigationList_subNavLink__anNud",selected:"subNavigationList_selected__Lwm9W","filter-enter-ml":"subNavigationList_filter-enter-ml__hLZYO","filter-exit-ml":"subNavigationList_filter-exit-ml__rL8Lv"}},57269:function(e){e.exports={CategoryProductViewContainer:"subCategory_CategoryProductViewContainer__4gPVa",CategoryProductView:"subCategory_CategoryProductView__6biDF",ProductCommerce__podium:"subCategory_ProductCommerce__podium__cnA4K","filter-enter-ml":"subCategory_filter-enter-ml___tUYk","filter-exit-ml":"subCategory_filter-exit-ml__19zZc","fade-in":"subCategory_fade-in__jBq2g"}}}]);